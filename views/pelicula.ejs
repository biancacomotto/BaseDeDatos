<!DOCTYPE html>
<html>
<head>
    <title><%= movie.title %></title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
<h1><%= movie.title %></h1>
<h3>Fecha: <%= movie.release_date %></h3>
<h3>Dirigida por: </h3>
<ul>
    <% movie.directors.forEach((director) => { %>
        <li>
            <a href="/director/<%= director.crew_member_id %>"><%= director.crew_member_name %></a>
        </li>
    <% }); %>
</ul>
<h3>Escrita por: </h3>
<ul>
    <% movie.writers.forEach((writer) => { %>
        <li>
            <%= writer.crew_member_name %>
        </li>
    <% }); %>
</ul>
<h3>Argumento:</h3>
<div id="overview"><p><%= movie.overview %></p></div>
<h3>Elenco:</h3>
<ul>
    <% movie.cast.sort((a, b) => a.cast_order - b.cast_order).forEach((actor) => { %>
        <li><a href="/actor/<%= actor.actor_id %>"><%= actor.actor_name %></a> - <%= actor.character_name %></li>
    <% }); %>
</ul>
<h3>Crew:</h3>
<ul>
    <% movie.crew.forEach((crewMember) => { %>
        <li>
            <%= crewMember.crew_member_name %> - <%= crewMember.department_name %>
            (<%= crewMember.job %>)
        </li>
    <% }); %>
 </ul>

 <!-- Palabras clave (Keywords) -->
<h3>Palabras Clave:</h3>
<ul>
    <% movie.keywords.forEach((keyword) => { %>
        <li><%= keyword %></li>
    <% }); %>
</ul>
<!--
ul crea una unordered list y forEach permite recorrer todos los elementos de un array,
(array movie.palabras_clave). Por cada "palabra clave", se ejecuta una función que genera un nuevo elemento li (elemento de lista).
Cada palabra clave se mostrará como un ítem dentro de la lista.
-->

 <!-- Idiomas -->
 <h3>Idiomas:</h3>
 <ul>
     <% movie.languages.forEach((language) => { %>
             <li><%= language %></li>
         <% }); %>
 </ul>

 <!-- Géneros -->
 <h3>Géneros:</h3>
 <ul>
     <% movie.genres.forEach((genre) => { %>
             <li><%= genre %></li>
         <% }); %>
 </ul>

 <!-- Países de producción -->
 <h3>Países de Producción:</h3>
 <ul>
     <%
     const paisesUnicos = new Set();
     movie.companies.forEach((company) => {
         paisesUnicos.add(company.country_name);
     });

     Array.from(paisesUnicos).forEach((country) => { %>
         <li><%= country %></li>
     <% }); %>
     /*
     - new Set(): Crea un conjunto, que almacena valores únicos, elimina duplicados.
     - movie.companies.forEach: Itera sobre cada compañía en la lista movie.companies y agrega el nombre del país al Set (paisesUnicos).
     - Array.from(paisesUnicos): Convierte el conjunto en un arreglo.
     - forEach: Itera sobre el array y crea un elemento de lista (li) para mostrar el nombre de cada país.
     */
 </ul>

 <!-- Empresas de producción -->
 <h3>Empresas de Producción:</h3>
 <ul>
     <% movie.companies.forEach((company) => { %>
         <li><%= company.company_name %> (País: <%= company.country_name %>)</li>
     <% }); %>
 </ul>

<p></p>
<!-- Botón para volver al buscador -->
<div id="inicio"><a href="/">Inicio</a></div>
</body>
</html>